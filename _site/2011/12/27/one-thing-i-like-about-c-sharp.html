<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>One thing I like about C#</title>
	<meta name="description" content="I enjoy programming stuff - up to and including things!">
	<meta name="author" content="Brian Scaturro">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Anton' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/skeleton.css">
	<link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/pygments.css">
	<link rel="shortcut icon" href="/images/favicon.ico">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>	
<body>
	<div class="container">
		<header id="branding" class="sixteen columns">
			<a href="/">
				<div class="site-heading">Brian Scaturro</div>
				<div class="site-subheading">Fancy a dance?</div>
			</a>
		</header>
		<div id="main" role="main" class="sixteen columns">
			<article class="eleven columns alpha">
				<h1>One thing I like about C#<span class="post-date">27 Dec 2011</span></h1>
				I was recently asked the question: What are some things you like about C#? Well there are some obvious answers like generics, a comprehensive framework class library, delegates, dynamic typing, so on and so on. One answer I gave as I thought about it is something day to day C# coders love but seldom give a second thought to: Object initialization. The means for doing this in C# is pretty cool, and me being someone who has his foot in a lot of different environments and languages - I can really appreciate how cool this convention is.

The C# object initializer syntax is most useful when you have a need to create an object and alter it's state after instantiation, usually to affect the outcome of some behavior. The alternative is creating an object that creates it's state based on what is passed to the constructor. Let's take a look at a common task, let's say sending email via SMTP, in PHP and then C# using the object initializer syntax.

<h3>The PHP Way</h3>
Let's first look at the <a href="http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list" target="_blank">PHPMailer</a> class. This is a pretty typical scenario in the land of PHP.

<pre class="prettyprint">
require_once 'PHPMailer5/class.phpmailer.php';

$mail = new PHPMailer();
$mail-&gt;IsSMTP(); 
$mail-&gt;Host = 'smtp.server.com';
$mail-&gt;Port = 25;
$mail-&gt;SMTPAuth = true;
$mail-&gt;Username = 'user';
$mail-&gt;Password = 'password';
$mail-&gt;SetFrom('brian@brianscaturro.com', 'Brian');
$mail-&gt;AddAddress('bill@email.me', 'Bill');
$mail-&gt;Subject = 'How are you?';
$mail-&gt;Body = 'This e-mail was sent using PHPMailer.';
$mail-&gt;Send();
</pre>

We create our new object, and proceed to set one property after another on the <code>$mail</code> instance of our PHPMailer class. It is functional, and it is pretty straightforward as to what we are doing. The downside is there is a lot of redundancy as we have to always operate on the already instantiated <code>$mail</code> object. <code>$mail->this,$mail->that,$mail->something_else</code>.

<h3>The C# Way</h3>

The .NET framework comes with a lot of handy tools built right in. This set of tools is called the framework class library or FCL. This is a huge bonus for the .NET environment. In languages like PHP, there are plenty of great tools, but you have to do quite a bit of hunting to find one that suits your needs, store it in the file system, and then <code>require</code> them into your script. The equivalent (and let's face it, easier) way of including our built-in .NET email classes is to use the <code>using</code> directive at the top of our C# file:

<pre class="prettyprint">
using System.Net.Mail
</pre>

Let's look at simple example of using the .NET <code>MailMessage</code> class with the handy object initializer syntax to send our email over SMTP:

<pre class="prettyprint">
MailMessage email = new MailMessage()
{
    Subject = "How are you?",
    Body = "This e-mail was sent using .NET",
    IsBodyHtml = false,
    From = new MailAddress("brian@brianscaturro.com","Brian")
};
email.To.Add(new MailAddress("bill@email.me", "Bill"));

SmtpClient server = new SmtpClient();
server.Send(email);
</pre>

Server,port, and authentication details are stored in the convenient Web.config file that .NET uses, and are passed to our <code>SmtpClient</code> class transparently. Look at all the redundancy that removed! You can see that rather than typing <code>email.Subject,email.Body, email.blah</code>, we can do <code>new Class() { //properties }</code>. This is also a gem for collections in C#:

<pre class="prettyprint">
List&lt;Cat&gt; cats = new List&lt;Cat&gt;
{ 
    new Cat(){Name = "Whiskers"},
    new Cat(){Name = "Boots"} 
}
</pre>

Very cool stuff.

.NET is an awesome framework, that has a lot of great tools to simplify the work at hand. Object initializers are probably so widely used that the C# community might take them for granted, but when you stack them against some of the alternative ways other languages do things - you can really appreciate this useful convention.

			</article>
			<aside class="five columns omega">
				<img class="aligncenter add-bottom photo" src="/images/steed.jpg" alt="some of my best thinking occurs on unicorns">
				<h2 class="sub-heading">Recent Posts</h2>
				<ul class='posts'>
					
					<li><h3><a href="/2012/05/21/domain-driven-php.html">Domain Driven PHP</a></h3></li>
					
					<li><h3><a href="/2012/04/27/is-agile-dead.html">Is Agile Dead?</a></h3></li>
					
					<li><h3><a href="/2012/03/27/tdd-with-mock-objects-and-phpunit.html">TDD With Mock Objects And PHPUnit</a></h3></li>
					
					<li><h3><a href="/2012/03/10/javascript-masterclass-review.html">JavaScript Masterclass With Thomas Fuchs and Amy Hoy: A Review</a></h3></li>
					
					<li><h3><a href="/">The rest....</a></h3></li>
				</ul>
			</aside>
		</div>
	</div>
</body>
</html>